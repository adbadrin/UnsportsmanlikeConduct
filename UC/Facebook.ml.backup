(* Facebook API functions *)
(* by Thomas Brittain *)

#require "netclient";;
#require "equeue-ssl";;
#require "lwt";;

let facebook_app_id = "1432703690354746"
let app_secret = "01a6334b2c71020d23b16a022d1c316b"

(* WTF OCaml?! Why do you do this to me? *)
let (>>=) = Lwt.bind

(* User type *)
type user = {first_name : string; last_name : string; uc_username : string; email_address : string}

(* after you get the code parameter from the facebook redirect: *)
(* (1) verify the user by exchaniging the code for an access token using an endpoint *)

(* Verify the user *)
(* exchange the code parameter from the facebook redirect for an access token using an endpoint *)
let verify_user user code_parameter =
  let redirect_uri = "http://localhost:8080/gameplay" in
  let o_auth_endpoint = "https://graph.facebook.com/oauth/access_token?" ^
                        "client_id=" ^ facebook_app_id ^
                        "&redirect_uri=" ^ redirect_uri ^
                        "&client_secret=" ^ app_secret ^
                        "&code=" code_parameter
  in
  (* make HTTP GET request to the OAuth endpoint *)

  (* successful response: access_token={access-token}&expires={seconds-til-expiration} *)
  Ssl.init() 
  >>= 


(* Check if the user is logged into facebook *)
let is_logged_in user =

